import{v as e,J as a,K as t}from"./server.mjs";const i=e.ref(!1),s=e.ref({necessary:!0,analytics:!0,affiliate:!0}),n=e.ref(!1),r=e.ref(!1);function useCookieConsent(){const o=i,l=n,c=e.ref(null),f=e.ref(""),u=e.ref(""),v=e.ref(""),d=s,updateLobbyLinks=e=>{const i=new URLSearchParams((void 0).location.search),s=i.get("btag"),n=i.get("affid");let r=i.get("tracker");r||(r=e||a("affiliateTracker"));let o=[];r&&o.push(`tracker=${r}`),s&&o.push(`btag=${s}`),n&&o.push(`affid=${n}`);const l=o.join("&"),c=l?`?${l}`:"";f.value=`${t}${c}#registration`,u.value=`${t}${c}#login`,v.value=`${t}${c}#play/`},saveToLocalStorage=e=>{if(!r.value)return;e.analytics,localStorage.setItem("cookieConsent",JSON.stringify({preferences:e,timestamp:(new Date).toISOString(),version:"1.0"}));const t=c.value;if(t)(e=>{if(!e)return void updateLobbyLinks(null);const a=new Date;a.setDate(a.getDate()+30),(void 0).cookie=`affiliateTracker=${e}; max-age=2592000; path=/; SameSite=Strict; Secure`,updateLobbyLinks(e)})(t);else{const e=a("affiliateTracker");updateLobbyLinks(e)}e.analytics};return e.watch(d,(e=>{}),{deep:!0}),{showBanner:o,isPreferencesOpen:l,preferences:d,cookieCategories:[{id:"necessary",label:"Necessary Cookies",description:"Essential for website functionality. These cookies are required and cannot be disabled.",required:!0},{id:"analytics",label:"Analytics Cookies",description:"Help us understand how visitors interact with our website. These cookies collect anonymous information.",required:!1},{id:"affiliate",label:"Affiliate Tracking",description:"Essential for our business operations. We use a unique identifier stored for 30 days to credit our partners when you visit gaming sites. No personal data is collected.",required:!0}],handleAcceptAll:()=>{r.value=!0;const e={necessary:!0,analytics:!0,affiliate:!0};d.value=e,saveToLocalStorage(e),o.value=!1},handleDeclineAll:()=>{r.value=!0;const e={necessary:!0,analytics:!1,affiliate:!0};d.value=e,saveToLocalStorage(e),o.value=!1},savePreferences:()=>{r.value=!0;const e={...d.value,necessary:!0,affiliate:!0};d.value=e,saveToLocalStorage(e),o.value=!1,l.value=!1},handleOpenPreferences:()=>{if(l.value=!0,localStorage.getItem("cookieConsent"))try{const{preferences:e}=JSON.parse(localStorage.getItem("cookieConsent"));d.value={...e,necessary:!0,affiliate:!0}}catch(e){d.value={necessary:!0,analytics:!0,affiliate:!0}}else d.value={necessary:!0,analytics:!0,affiliate:!0}},withdrawConsent:()=>{localStorage.removeItem("cookieConsent"),d.value={necessary:!0,analytics:!1,affiliate:!0},updateLobbyLinks(null),o.value=!0},getConsentStatus:()=>{const e=localStorage.getItem("cookieConsent");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},regLink:f,loginLink:u,playLink:v}}export{useCookieConsent as u};
//# sourceMappingURL=useCookieConsent.mjs.map
